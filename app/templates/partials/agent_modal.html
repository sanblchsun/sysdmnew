<!-- app/templates/partials/agent_modal.html -->
<div class="modal-content">
  <div class="modal-header">
    <h2>–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–¥–µ–ª–∞ –∞–≥–µ–Ω—Ç–∞</h2>
    <span class="modal-close" id="modal-close-btn">&times;</span>
  </div>

  <div class="modal-body">
    <div class="agent-info-grid">
      <div class="info-item">
        <span class="info-label">–ê–≥–µ–Ω—Ç:</span>
        <span class="info-value">{{ agent.name_pc }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</span>
        <span class="info-value">{{ agent.user_name }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">–ö–æ–º–ø–∞–Ω–∏—è:</span>
        <span class="info-value">{{ agent.company_name }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">–¢–µ–∫—É—â–∏–π –æ—Ç–¥–µ–ª:</span>
        <span class="info-value">{{ agent.current_department_name }}</span>
      </div>
    </div>

    <div class="department-selection" style="margin: 20px 0">
      <h3 style="margin-bottom: 15px">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –æ—Ç–¥–µ–ª:</h3>

      <div
        class="departments-list"
        style="
          max-height: 200px;
          overflow-y: auto;
          border: 1px solid #ddd;
          border-radius: 5px;
          padding: 10px;
        "
        data-current-dept-id="{% if agent.current_department_id %}{{ agent.current_department_id }}{% else %}0{% endif %}"
      >
        <!-- –û–ø—Ü–∏—è "–ë–µ–∑ –æ—Ç–¥–µ–ª–∞" -->
        <div class="department-option" style="margin-bottom: 10px">
          <label
            style="
              display: flex;
              align-items: center;
              cursor: pointer;
              padding: 5px;
            "
          >
            <input
              type="radio"
              name="department"
              value="0"
              style="margin-right: 10px"
            />
            <span>üè† –ë–µ–∑ –æ—Ç–¥–µ–ª–∞</span>
          </label>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ –æ—Ç–¥–µ–ª–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏ -->
        {% for dept in departments %}
        <div class="department-option" style="margin-bottom: 10px">
          <label
            style="
              display: flex;
              align-items: center;
              cursor: pointer;
              padding: 5px;
            "
          >
            <input
              type="radio"
              name="department"
              value="{{ dept.id }}"
              style="margin-right: 10px"
            />
            <span>üìÅ {{ dept.name }}</span>
          </label>
        </div>
        {% endfor %} {% if not departments %}
        <div style="color: #666; font-style: italic; padding: 10px">
          –í —ç—Ç–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –Ω–µ—Ç –æ—Ç–¥–µ–ª–æ–≤. –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—ã —Å–Ω–∞—á–∞–ª–∞.
        </div>
        {% endif %}
      </div>
    </div>

    <div class="modal-actions">
      <button
        class="btn btn-primary"
        id="save-department-btn"
        data-agent-id="{{ agent.id }}"
      >
        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
      </button>

      <button class="btn btn-secondary" id="cancel-btn">‚úï –û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>
