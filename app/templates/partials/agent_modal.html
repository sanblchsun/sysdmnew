<!-- app/templates/partials/agent_modal.html -->
<div class="modal-content">
  <div class="modal-header">
    <h2>–ê–≥–µ–Ω—Ç: {{ agent.name_pc }}</h2>
    <span class="modal-close" onclick="closeAgentModal()">&times;</span>
  </div>

  <div class="modal-body">
    <div class="agent-info-grid">
      <div class="info-item">
        <span class="info-label">ID:</span>
        <span class="info-value">{{ agent.id }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">–ò–º—è –ü–ö:</span>
        <span class="info-value">{{ agent.name_pc }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</span>
        <span class="info-value">{{ agent.user_name }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">IP –∞–¥—Ä–µ—Å:</span>
        <span class="info-value">{{ agent.ip_addr }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">–û–°:</span>
        <span class="info-value">{{ agent.system }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">–ö–æ–º–ø–∞–Ω–∏—è:</span>
        <span class="info-value">{{ agent.company_name }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">–û—Ç–¥–µ–ª:</span>
        <span class="info-value">{{ agent.department_name }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">–°—Ç–∞—Ç—É—Å:</span>
        <span
          class="info-value {% if agent.is_online %}status-online{% else %}status-offline{% endif %}"
        >
          {% if agent.is_online %}üü¢ –û–Ω–ª–∞–π–Ω{% else %}üî¥ –û—Ñ—Ñ–ª–∞–π–Ω{% endif %}
        </span>
      </div>
      <div class="info-item">
        <span class="info-label">–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</span>
        <span class="info-value">{{ agent.last_seen }}</span>
      </div>
      {% if agent.memory %}
      <div class="info-item">
        <span class="info-label">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:</span>
        <span class="info-value">
          {{ agent.memory.used_gb }} GB / {{ agent.memory.total_gb }} GB ({{
          agent.memory.percent }}%)
        </span>
        <div class="progress-bar">
          <div
            class="progress-bar-fill"
            data-percent="{{ agent.memory.percent }}"
          >
            {{ agent.memory.percent }}%
          </div>
        </div>
      </div>
      {% endif %}
    </div>

    <div class="modal-actions">
      <button
        class="btn btn-primary"
        hx-post="/api/agent/{{ agent.id }}/action?action=ping"
        hx-target="#notification"
        hx-swap="innerHTML"
        onclick="closeAgentModal()"
      >
        üèì –ü–∏–Ω–≥–æ–≤–∞—Ç—å
      </button>

      <button
        class="btn btn-secondary"
        hx-post="/api/agent/{{ agent.id }}/action?action=remote"
        hx-target="#notification"
        hx-swap="innerHTML"
        onclick="closeAgentModal()"
      >
        üíª –£–¥–∞–ª–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø
      </button>

      <button
        class="btn btn-secondary"
        hx-post="/api/agent/{{ agent.id }}/action?action=files"
        hx-target="#notification"
        hx-swap="innerHTML"
        onclick="closeAgentModal()"
      >
        üìÅ –§–∞–π–ª—ã
      </button>

      <button class="btn btn-close" onclick="closeAgentModal()">
        ‚úï –ó–∞–∫—Ä—ã—Ç—å
      </button>
    </div>
  </div>
</div>
